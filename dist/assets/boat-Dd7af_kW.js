import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */const s=(e,n=document)=>n.querySelector(e),A=new URLSearchParams(location.search),T=A.get("id"),P={boat:null};M().catch(e=>{console.error("Boat detail init failed:",e),h()});async function M(){if(!T)return h();try{console.log("üö§ Chargement du bateau depuis l'API Render...");const e=await fetch(`/api/boats/${T}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){if(e.status===404)return console.log("‚ùå Bateau non trouv√©"),h();throw new Error(`Erreur ${e.status}: ${e.statusText}`)}const n=await e.json();if(console.log("‚úÖ Donn√©es re√ßues de l'API:",n),n.success&&n.data&&n.data.boat)P.boat=n.data.boat,E(n.data.boat);else return console.error("‚ùå Format de donn√©es invalide:",n),h()}catch(e){return console.error("‚ùå Erreur lors du chargement du bateau:",e),h()}}function E(e){var p,d,i,u,f,g,y,w,$,C,x;console.log("üîÑ Hydratation avec les donn√©es:",e),document.title=`${e.name} ‚Äî SailingLoc`,s("#crumb-boat").textContent=e.name,s("#boat-name").textContent=e.name,s("#side-name").textContent=e.name,L("#boat-type",m(e.type)),L("#boat-category",m(e.category)),H("#boat-status",e.status);const n=[(p=e==null?void 0:e.location)==null?void 0:p.marina,(d=e==null?void 0:e.location)==null?void 0:d.city,(i=e==null?void 0:e.location)==null?void 0:i.country].filter(Boolean);s("#boat-location").textContent=n.join(" ‚Ä¢ ");const t=((u=e==null?void 0:e.pricing)==null?void 0:u.dailyRate)??0;s("#price-amount").textContent=S(t),s("#price-details").textContent=`Caution : ${S(((f=e==null?void 0:e.pricing)==null?void 0:f.securityDeposit)??0)} ‚Ç¨`;const l=(g=e==null?void 0:e.capacity)!=null&&g.maxPeople?`${e.capacity.maxPeople} pers`:null,o=(y=e==null?void 0:e.specifications)!=null&&y.length||(w=e==null?void 0:e.specifications)!=null&&w.width?`${(($=e==null?void 0:e.specifications)==null?void 0:$.length)??"‚Äî"} m √ó ${((C=e==null?void 0:e.specifications)==null?void 0:C.width)??"‚Äî"} m`:null,a=(x=e==null?void 0:e.specifications)!=null&&x.fuelType?m(e.specifications.fuelType):null;s("#quick-specs").innerHTML=[l,o,a].filter(Boolean).map(c=>`<span class="spec-pill">${c}</span>`).join(""),s("#boat-description").textContent=(e==null?void 0:e.description)||"Aucune description disponible",j((e==null?void 0:e.amenities)||[]),D(e);let r=(e==null?void 0:e.images)||(e==null?void 0:e.imageUrls)||[];Array.isArray(r)&&r.length>0&&(r=r.map(c=>typeof c=="string"?c.startsWith("http")?c:`https://sailingloc.onrender.com${c}`:c!=null&&c.fullUrl?c.fullUrl.replace("http://localhost:3000","https://sailingloc.onrender.com"):c!=null&&c.url?c.url.startsWith("http")?c.url:`https://sailingloc.onrender.com${c.url}`:c)),console.log("üñºÔ∏è [DEBUG] Images trait√©es pour boat.js:",r),q(r),I(e)}function L(e,n){const t=s(e);if(!n){t.style.display="none";return}t.textContent=n}function H(e,n){const t=s(e);if(!n){t.style.display="none";return}const l={available:"Disponible",maintenance:"Maintenance",rented:"Lou√©",inactive:"Inactif"};t.textContent=l[n]||n}function j(e){const n=s("#amenities-grid");if(!e.length){n.innerHTML="<em>Aucun √©quipement renseign√©.</em>";return}n.innerHTML=e.map(t=>`
    <div class="amenity-item"><i>‚úÖ</i><span>${v(t)}</span></div>
  `).join("")}function D(e){var l,o,a,r,p,d,i,u;const n=s("#specs-grid"),t=[["Type",m(e==null?void 0:e.type)||"‚Äî"],["Cat√©gorie",m(e==null?void 0:e.category)||"‚Äî"],["Capacit√©",(l=e==null?void 0:e.capacity)!=null&&l.maxPeople?`${e.capacity.maxPeople} personnes`:"‚Äî"],["Longueur",(o=e==null?void 0:e.specifications)!=null&&o.length?`${e.specifications.length} m`:"‚Äî"],["Largeur",(a=e==null?void 0:e.specifications)!=null&&a.width?`${e.specifications.width} m`:"‚Äî"],["Carburant",(r=e==null?void 0:e.specifications)!=null&&r.fuelType?m(e.specifications.fuelType):"‚Äî"],["Port",((p=e==null?void 0:e.location)==null?void 0:p.marina)||"‚Äî"],["Ville",((d=e==null?void 0:e.location)==null?void 0:d.city)||"‚Äî"],["Pays",((i=e==null?void 0:e.location)==null?void 0:i.country)||"‚Äî"],["Statut",(e==null?void 0:e.status)==="available"?"Disponible":m(e==null?void 0:e.status)||"‚Äî"],["Propri√©taire",((u=e==null?void 0:e.owner)==null?void 0:u.fullName)||"‚Äî"]];n.innerHTML=t.map(([f,g])=>`
    <div class="spec-item">
      <div class="spec-icon">‚öì</div>
      <div class="spec-content">
        <h4>${f}</h4>
        <p>${v(String(g))}</p>
      </div>
    </div>
  `).join("")}function q(e){console.log("üñºÔ∏è [DEBUG] renderImages appel√© avec:",e);const n=s("#main-image"),t=s("#thumbs");if(!e||!e.length){console.log("‚ö†Ô∏è Aucune image fournie, utilisation du placeholder"),t.innerHTML="";return}console.log("‚úÖ Affichage de",e.length,"image(s)"),n.innerHTML=`<img src="${e[0]}" alt="Photo principale du bateau" onerror="this.src='https://images.unsplash.com/photo-1508599589920-14cfa1c1fe4d?q=80&w=1200&auto=format&fit=crop'">`,t.innerHTML=e.slice(0,8).map(l=>`
    <div class="thumbnail"><img src="${l}" alt="Miniature" onerror="this.src='https://images.unsplash.com/photo-1508599589920-14cfa1c1fe4d?q=80&w=1200&auto=format&fit=crop'"></div>
  `).join(""),t.addEventListener("click",l=>{const o=l.target.closest(".thumbnail img");if(!o)return;const a=n.querySelector("img");a&&(a.src=o.src)})}function I(e){const n=s("#reviews-section"),t=s("#rating-stars"),l=s("#rating-value"),o=s("#rating-count"),a=(e==null?void 0:e.reviews)||[],r=a.length;if(!r){n.hidden=!0,s("#rating-wrap").style.display="none";return}const p=Math.round(a.reduce((i,u)=>i+((u==null?void 0:u.rating)||0),0)/r*10)/10;l.textContent=String(p),o.textContent=String(r),t.textContent="‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",n.hidden=!1;const d=s("#reviews-list");d.innerHTML=a.slice(0,6).map(i=>{var u,f;return`
    <div class="review-item">
      <div class="review-header">
        <div class="reviewer-info">
          <div class="reviewer-avatar">${(((u=i==null?void 0:i.user)==null?void 0:u.firstName)||"A")[0]}</div>
          <div>
            <div class="reviewer-name">${v(((f=i==null?void 0:i.user)==null?void 0:f.fullName)||"Client")}</div>
            <div class="review-date">${new Date((i==null?void 0:i.date)||(i==null?void 0:i.createdAt)||Date.now()).toLocaleDateString("fr-FR")}</div>
          </div>
        </div>
        <div class="review-rating">‚≠ê ${(i==null?void 0:i.rating)??"-"}/5</div>
      </div>
      <div class="review-text">${v((i==null?void 0:i.comment)||"")}</div>
    </div>
  `}).join("")}function h(){const e=document.querySelector(".boat-hero");e&&(e.style.display="none");const n=document.getElementById("boat-not-found");n&&(n.style.display="block")}function S(e){try{return new Intl.NumberFormat("fr-FR").format(e)}catch{return String(e)}}function m(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function v(e){return e.replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"})[n])}
